import{_ as p,a as w,h as v,f as m,t as y,C as b}from"./index.6a659667.js";function x(o,r,t){return p(this,void 0,void 0,function(){function a(i,g){return p(this,void 0,void 0,function(){var c,n,d;return w(this,function(h){switch(h.label){case 0:return c=!1,n=null,[4,m(g({payload:y(i,{clone:!0,traverse:!1}),integration:o,next:function(f){c=!0,f===null&&(n=null),f&&(n=f.obj)}}))];case 1:return h.sent(),!c&&n!==null&&(n=n,n.integrations=v(v({},i.integrations),(d={},d[o]=!1,d))),[2,n]}})})}var e,l,u,s;return w(this,function(i){switch(i.label){case 0:e=0,l=t,i.label=1;case 1:return e<l.length?(u=l[e],[4,a(r,u)]):[3,4];case 2:if(s=i.sent(),s===null)return[2,null];r=s,i.label=3;case 3:return e++,[3,1];case 4:return[2,r]}})})}function C(o,r){function t(a){return p(this,void 0,void 0,function(){var e;return w(this,function(l){switch(l.label){case 0:return e=!1,[4,m(o({payload:y(a.event,{clone:!0,traverse:!1}),integrations:r??{},next:function(u){e=!0,u&&(a.event=u.obj)}}))];case 1:if(l.sent(),!e)throw new b({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,a]}})})}return{name:"Source Middleware ".concat(o.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(a){return Promise.resolve(a)},track:t,page:t,identify:t,alias:t,group:t}}export{x as applyDestinationMiddleware,C as sourceMiddlewarePlugin};
